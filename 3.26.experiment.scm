(load "0.util.scm")
(define (experiment table)
  (let ((rand-high 1000)
        (n-inserts 500)
        (n-trials 25))
    (define (insert-rand-to-table table)
      (lambda ()
        (let iter ((n-left n-inserts))
          (if (< 0 n-left)
            (let ((key (list (random rand-high))))
              (put table key true)
              (if (get table key)
                (iter (- n-left 1))
                (error "Key not found -- EXPERIMENT" key)))))))
    (repeat
      (lambda () (elapsed (insert-rand-to-table table)))
      n-trials)))
